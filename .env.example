# ========================================
# Self-Learning Agent Environment Configuration
# Copy this file to .env.self-learning and fill in your values
# ========================================

# ========================================
# PROJECT SETTINGS
# ========================================
COMPOSE_PROJECT_NAME=selflearning-agent

# ========================================
# SERVICE MODES
# ========================================
# Options: training, production
MODE=training
FROZEN_RESOURCES_PATH=

# ========================================
# GEMINI AI (REQUIRED)
# ========================================
# Get your API key from: https://ai.google.dev/
GEMINI_API_KEY=your_gemini_api_key_here
GEMINI_MODEL=gemini-2.0-flash-exp
GEMINI_CACHE_ENABLED=true
GEMINI_CACHE_TTL_SECONDS=3600
GEMINI_BATCHING_ENABLED=true
GEMINI_MAX_BATCH_SIZE=8

# ========================================
# NEO4J GRAPH DATABASE
# ========================================
# Docker: use service name "neo4j"
# Standalone: use "localhost"
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=selflearning_neo4j_pass
NEO4J_PORT=7687
NEO4J_HTTP_PORT=7474

# ========================================
# QDRANT VECTOR STORE
# ========================================
# Docker: use service name "qdrant"
# Standalone: use "localhost"
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334

# ========================================
# REDIS CACHE
# ========================================
# Docker: use service name "redis-cache"
# Standalone: use "localhost"
REDIS_HOST=redis-cache
REDIS_PORT=6379

# ========================================
# POSTGRESQL (Agent Lightning Store)
# ========================================
# Docker: use service name "postgres"
# Standalone: use "localhost"
POSTGRES_USER=agentlightning
POSTGRES_PASSWORD=selflearning_postgres_pass
POSTGRES_DB=agentlightning_db
POSTGRES_PORT=5432
LIGHTNING_STORE_URL=postgresql://agentlightning:selflearning_postgres_pass@postgres:5432/agentlightning_db

# ========================================
# TRAINING CONFIG
# ========================================
UPDATE_FREQUENCY=5
MAX_ROLLOUTS_PER_SESSION=100
PARALLEL_RUNNERS=4
INITIAL_KNOWLEDGE_STORE_MAX_SIZE_GB=2.0
INITIAL_PATTERN_RETENTION_DAYS=30
INITIAL_MIN_PATTERN_FREQUENCY=3

# ========================================
# SERVICE PORTS (External Access)
# ========================================
TRAINING_AGENT_PORT=8001
PRODUCTION_AGENT_PORT=8000
TRAINING_UI_PORT=3001

# ========================================
# RESOURCE LIMITS
# ========================================
AGENT_CPU_LIMIT=2
AGENT_MEMORY_LIMIT=4G
NEO4J_CPU_LIMIT=1
NEO4J_MEMORY_LIMIT=2G
QDRANT_CPU_LIMIT=1
QDRANT_MEMORY_LIMIT=2G
REDIS_MEMORY_LIMIT=1G
POSTGRES_MEMORY_LIMIT=1G

# ========================================
# CONNECTION RETRY SETTINGS
# ========================================
# Retry logic for database connections
DB_MAX_RETRIES=10
DB_RETRY_DELAY_SECONDS=5
DB_CONNECTION_TIMEOUT_SECONDS=30
STARTUP_WAIT_TIMEOUT_SECONDS=120

# ========================================
# LOCAL LLM (Optional - Ollama)
# ========================================
# Enable for cost optimization (large extraction tasks)
LOCAL_LLM_ENABLED=false
OLLAMA_HOST=ollama
OLLAMA_PORT=11434
OLLAMA_MODEL=llama2

# ========================================
# MONITORING (Optional)
# ========================================
GRAFANA_PORT=3000
GRAFANA_PASSWORD=admin
PROMETHEUS_PORT=9090
